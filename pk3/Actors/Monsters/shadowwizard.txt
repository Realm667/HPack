Actor ShadowWizard 16510
{
	//$Category Monsters
	//$Title Shadow Wizard
	Obituary "$OB_SHADOWWIZARD"
	Health 1000
	Radius 21
	Height 66
	Mass 1000
	Speed 8
	PainChance 32
	MeleeRange 96
	MeleeDamage 4
	MissileType "ShadowWizardProjectile"
	SeeSound "H2ShadowWizard/Sight"
	PainSound "H2ShadowWizard/Pain"
	DeathSound "H2ShadowWizard/Death"
	ActiveSound "H2ShadowWizard/Sight"
	MeleeSound "H2ShadowWizard/Melee"
	DropItem "SkullRodAmmo", 84, 10
	DropItem "LichSkull", 4, 0
	Species "Wizard"
	Monster
	+DONTHARMSPECIES
	+MISSILEMORE
	+NOGRAVITY
	+FLOAT
	+FLOATBOB
	+DONTMORPH
	States
	{
	Spawn:
		SHWZ AB 4 A_Look
		Loop
	See:
	    SHWZ AAABBB 2 A_Chase("","",chf_resurrect)
        SHWZ A 0 A_Jump(96,1)
        Loop
        SHWZ A 0 A_FastChase
        SHWZ A 1 A_PlaySound("monster/blur")
        SHWZ A 0 A_SpawnItem("SHFX3",0,0)
        SHWZ A 1 A_FastChase
        SHWZ A 0 A_SpawnItem("SHFX3",0,0)
        SHWZ A 1 A_FastChase
        SHWZ A 0 A_SpawnItem("SHFX3",0,0)
        SHWZ A 1 A_FastChase
        SHWZ A 0 A_SpawnItem("SHFX3",0,0) 
        //SHWZ B 1 A_FastChase
        //SHWZ B 0 A_SpawnItem("SHFX3",0,0)
        //SHWZ B 1 A_FastChase
        //SHWZ B 0 A_SpawnItem("SHFX3",0,0)
        //SHWZ B 1 A_FastChase
        //SHWZ B 0 A_SpawnItem("SHFX3",0,0)
        //SHWZ B 1 A_FastChase
        //SHWZ B 0 A_SpawnItem("SHFX3",0,0)
        Goto See
	Melee:
	    SHWZ B 4 A_FaceTarget
		SHWZ C 4 A_FaceTarget
		SHWZ D 4 bright A_FaceTarget
		SHWZ E 4 bright A_FaceTarget
		SHWZ E 0 bright A_PlaySound("H2ShadowWizard/Melee")
		SHWZ E 4 bright A_CustomBulletAttack(0, 0, 1, 8, "ShadowWizardPuff")
		Goto See
	Missile:
		SHWZ C 0 A_Jump(32, "Teleport")
		SHWZ C 0 A_Jump(128, "Heal")
		SHWZ C 0 A_Jump(64, "Yellow")
		SHWZ C 6 A_FaceTarget
		SHWZ D 6 Bright A_FaceTarget
		SHWZ D 6 Bright A_CustomMissile("ShadowWizardProjectile", 40, 0, 0)
		SHWZ C 6 A_FaceTarget
		SHWZ D 6 Bright A_FaceTarget
		SHWZ D 6 Bright A_CustomMissile("ShadowWizardProjectile", 40, 0, 0)
		SHWZ D 0 Bright A_Jump(80, 2)
		SHWZ D 0 Bright A_SpidReFire
		Goto Missile+1
		SHWZ D 0
		Goto See
	Yellow:
		SHWZ C 6 A_FaceTarget
		SHWZ D 6 Bright A_FaceTarget
		SHWZ E 6 Bright
		SHWZ F 6 Bright
        SHWZ F 0 bright A_CustomMissile("FireBlast", 40, 0, -16)
        SHWZ F 0 bright A_CustomMissile("FireBlast", 40, 0, 0)
		SHWZ F 0 bright A_CustomMissile("FireBlast", 40, 0, 16)
		Goto See
	Heal:
		SHWZ C 6 A_FaceTarget
		SHWZ D 6 Bright A_FaceTarget
		SHWZ E 6 Bright
		SHWZ E 0 A_PlaySound("H2ShadowWizard/Ress")
		SHWZ F 6 Bright A_MeleeAttack
        SHWZ F 0 bright A_Jump(80, 2)
		Goto See
	Teleport:
		SHWZ C 0 A_JumpIfCloser(512, 1)
		Goto See
		SHWZ C 0 A_ChangeFlag("NoPain", 1)
		SHWZ C 6 A_PlaySoundEx("H2ShadowWizard/Teleport", "SoundSlot7", 0)
		SHWZ DEF 6 Bright A_FaceTarget
		TNT1 A 0 A_Stop
		TNT1 A 0 A_StopSoundEx("SoundSlot7")
		TNT1 A 0 A_SpawnItemEx("TeleportFog", 0, 0, 33, 0, 0, 0, 0, 128) //Remove the 33 for Doom
		TNT1 A 0 A_ChangeFlag(Invulnerable, 1)
		TNT1 A 0 A_UnSetShootable
		TNT1 A 0 A_ChangeFlag("NonShootable", 1)
		TNT1 A 0 A_ChangeFlag("NoRadiusDMG", 1)
		TNT1 A 0 A_ChangeFlag("NoTeleport", 1)
		//TNT1 A 0 A_ChangeFlag("NoDropOff", 0)
		//TNT1 A 0 A_ChangeFlag("FloorHugger", 1)
		//TNT1 A 0 A_ChangeFlag("Float", 1)
		//TNT1 A 0 A_ChangeFlag("NoGravity", 1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Wander
		TNT1 AAA 2 A_Wander
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Wander
		TNT1 AAA 2 A_Wander
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Wander
		TNT1 AAA 2 A_Wander
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Wander
		TNT1 AAA 2 A_Wander
		SHWZ A 0 A_SpawnItemEx("TeleportFog", 0, 0, 33, 0, 0, 0, 0, 128) //Remove the 33 for Doom
		//SHWZ A 0 A_ChangeFlag("NoDropOff", 1)
		//SHWZ A 0 A_ChangeFlag("FloorHugger", 0)
		//SHWZ A 0 A_ChangeFlag("Float", 0)
		//SHWZ A 0 A_ChangeFlag("NoGravity", 0)
		SHWZ A 0 A_ChangeFlag(Invulnerable, 0)
		SHWZ A 0 A_SetShootable
		SHWZ A 0 A_ChangeFlag(Shootable, 1)
		SHWZ A 0 A_ChangeFlag("NonShootable", 0)
		SHWZ A 0 A_ChangeFlag("NoRadiusDMG", 0)
		SHWZ A 0 A_ChangeFlag("NoTeleport", 0)
		SHWZ A 0 A_ChangeFlag("NoPain", 0)
		Goto See
	Pain:
		SHWZ A 3
		SHWZ A 3 A_Pain
		SHWZ A 0 A_Jump(96, "Teleport")
		Goto See
	Death:
		SHWZ G 4 A_Scream
		SHWZ G 1 A_ChangeFlag("FLOATBOB",0)
		SHWZ HIJKLM 5 bright
		SHWZ N 5
		SHWZ O 5 A_NoBlocking
		SHWZ P -1
		Stop
	}
}

ACTOR SHFX3
{   
   Radius 2
   Height 2
   Speed 0
   PROJECTILE
   RENDERSTYLE Translucent
   ALPHA 0.75
   States
   {
   Spawn:
      TNT1 A 3
      SHWZ A 3 A_FadeOut(0.10)
      goto spawn+1
   }
}

Actor ShadowWizardProjectile : HornRodFX2
{
	Radius 8
	Height 14
	Speed 10
	FastSpeed 20
	Damage 8	
	RenderStyle Add
	Projectile
	-ACTIVATEPCROSS
	-ACTIVATEIMPACT
	+SEEKERMISSILE
	PROJECTILE
    RENDERSTYLE ADD
	SeeSound "H2ShadowWizard/Fire"
	DeathSound "H2ShadowWizard/Hit"
}

Actor ShadowWizardPuff : BulletPuff
{
	Radius 1
	Height 1
	+NOCLIP
	+PUFFONACTORS
	-BLOODSPLATTER
	+BLOODLESSIMPACT
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 1 A_RadiusThrust(5120, 128, 0)
		Stop
	}
}
	
actor FireBlast
{
    Speed 16
	FastSpeed 32
    Damage 10
    PROJECTILE
    +STRIFEDAMAGE
    +NOGRAVITY
	SeeSound "fireblast/explode"
    Deathsound "superfireblast/explode"
    states
    {
    Spawn:
          PROJ ABC 4 Bright A_SeekerMissile(5,10)
          Loop
    Death:
          PROJ D 4 Bright A_Explode(8,64,0)
          PROJ EFGH 4 Bright
          PROJ I 4 Bright A_Fadeout(0.50)
          Stop
          }
}